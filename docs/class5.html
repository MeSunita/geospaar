<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Geospatial Analysis with R</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs-2.20/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/lucy.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/middlebury-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="themes/class3plus.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Geospatial Analysis with R
]
.subtitle[
## Class 5
]

---


&lt;img src="figures/sms-farmers.png" width="80%" style="display: block; margin: auto;" /&gt;

---


```r
library(sf)
library(dplyr)
f &lt;- system.file("extdata", "farmer_spatial.csv", package = "geospaar")
farmers &lt;- readr::read_csv(f)
farmers &lt;- farmers %&gt;% select(uuid, x, y) %&gt;% distinct() %&gt;% 
  st_as_sf(., coords = c("x", "y"))
f &lt;- system.file("extdata", "districts.shp", package = "geospaar")
dists &lt;- read_sf(f)
st_crs(farmers) &lt;- st_crs(dists)

# join farmers with districts (h/t https://mattherman.info/blog/point-in-poly/)
farmers_in_dists &lt;- st_join(farmers, dists, join = st_within) %&gt;%
  tidyr::drop_na()
farmer_count &lt;- count(as_tibble(farmers_in_dists), distName)
dists_w_farmers &lt;- left_join(dists, farmer_count) %&gt;% 
  mutate(n = ifelse(is.na(n), 0, n))

png("figures/sms-farmers.png", height = 4, width = 5, res = 300,
    units = "in")
plot(dists_w_farmers["n"], breaks = c(0, 5, 10, 15, 20, 50, 500), 
     reset = FALSE, main = "Number of SMS Farmers by District")
plot(farmers %&gt;% filter(uuid %in% unique(farmers_in_dists$uuid)) %&gt;%
       st_geometry(), add = TRUE, pch = "+", col = "cyan", cex = 0.5)
dev.off()
```

---
# Today

- RMarkdown
- The `R` ecosystem
- Building blocks of R: data types, functions, etc

---
# A look at RMarkdown

Chunk options

&lt;img src="figures/class4_3.png" width="80%" style="display: block; margin: auto;" /&gt;

[Rmarkdown demo](rmarkdown_demo.html) by Lei Song
[RMarkdown gallery](https://rmarkdown.rstudio.com/lesson-1.html)

---

## RMarkdown exercises
- In your personal R project, Create new RMarkdown file using `usethis::use_vignette(name = "example_vignette")`
- Create chunks for the following:
  - Load the `geospaar` package
  - Load the `chirps` data and print its structure using `str(chirps)`
  - Plot `chirps` data using `raster::plot(chirps)`. Above this chunk, include a text description for the CHIRPS data using different text formatting (bold, italics, etc). You can see information on the `CHIRPS` data in the `man` folder.
  - Include a chunk with an obvious error, like `5 + "string"`
  - Try knitting this RMD using different [chunk options](https://rmarkdown.rstudio.com/lesson-3.html)
---

# The R Ecosystem

&lt;img src="figures/class5_u1m2.png" width="60%" style="display: block; margin: auto;" /&gt;

---
## The R Ecosystem
### Common objects

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="figures/class2_objects.png" alt="Credit: L. Song" width="80%" /&gt;
&lt;p class="caption"&gt;Credit: L. Song&lt;/p&gt;
&lt;/div&gt;

---
## The R Ecosystem
### Data types
There are 6 atomic data types:
- character
  e.g. `'hello world'`, `'abc'`
- double (real or decimal)
  e.g. `10`, `3.14`, `1e10`
- integer
  e.g. `1L`
- logical
  e.g. `TRUE`, `FALSE`, `T`, `F`
- complex
  e.g. `1 + 3i` (not commonly used by us)
- *raw* (rarely used by us)

---
## The R Ecosystem
### Special data types

- `NULL`: Does not exist
- Missing data: `NA`. A special logical type that converts into the type it is associated with.
- Infinity: `Inf` (e.g. `1 / 0`) and `-Inf` (e.g. `-1 / 0`. A special double type.
- Undefined value: `NaN`. Also a special double type. (e.g. `0 / 0`)

---
## The R Ecosystem
### Special data types

- Date: `as.Date('1970-1-5')`
- Time: `as.POSIXct('1970-1-5')`
- Factor: factors are integers with associated labels. 

---
## The R Ecosystem
### Checking data type

- `typeof(x)`
- `is.xxx(x)`: 

  * e.g. `is.double(x)`, `is.integer(x)`, `is.logical(x)`, `is.character(x)`, `is.complex(x)`, `is.raw(x)`, `is.factor`
  
  * `is.numeric(x)` 
  
  * e.g. `is.na(y)`, `is.nan(y)`, `is.null(y)`, `is.infinite(y)`, `is.finite(y)`.

---
## The R Ecosystem
### Converting data type

- `as.xxx(x)`:

  * e.g. `as.numeric(x)`, `as.double(x)`, `as.character(x)`, `as.integer(x)`, `as.logical(x)`, `as.complex(x)`, `as.raw(x)`, `as.factor(x)`, `as.Date(x)`, `as.POSIXct(x)`.
  
- logical &lt; integer &lt; double &lt; character

---
## The R Ecosystem
### Data structures
- Atomic vectors (most commonly thought of kind):

  * A sequence of objects of the **same class**.
  * Arrays and matrices are vectors with more than one dimension.
  
      - Matrices have 2 dimensions.
      - Arrays could have higher dimensions.

- Lists

  * Lists can contain objects of **different classes**.
  * Lists can be converted list-matrix or list-array by defining dimensions.
  * `data.frame` and `tibble` are S3 objects that are lists in tabular form

---

## The R Ecosystem
### Vectors

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="figures/class2_vector.png" alt="Credit: L. Song"  /&gt;
&lt;p class="caption"&gt;Credit: L. Song&lt;/p&gt;
&lt;/div&gt;

---
## Let's create some data

- `vector`
- `matrix`
- `data.frame`
- `list`
---
## Creating a vector

```r
v1 &lt;- c(1,2,3,4,5)
v2 &lt;- 6:10
print(v1)
```

```
## [1] 1 2 3 4 5
```

```r
print(v2)
```

```
## [1]  6  7  8  9 10
```

---
## Combining vectors


```r
v1 &lt;- c(1,2,3,4,5)
v2 &lt;- 6:10
v3 &lt;- c(v1, v2)
print(v3)
```

```
##  [1]  1  2  3  4  5  6  7  8  9 10
```

```r
print(class(v3))
```

```
## [1] "numeric"
```
---
## Combining vectors
What happens when you combine data types in a vector?


```r
v4 &lt;- c(v1, "test")
print(v4)
```

```
## [1] "1"    "2"    "3"    "4"    "5"    "test"
```

```r
print(class(v4))
```

```
## [1] "character"
```
---
## Vectorized operations

```r
v1 &lt;- 1:9
print(v1)
```

```
## [1] 1 2 3 4 5 6 7 8 9
```

```r
print(v1 + 5) ## addition applied to each element in vector
```

```
## [1]  6  7  8  9 10 11 12 13 14
```

```r
print(v1 * 3) ## multiplication applied to each element in vector
```

```
## [1]  3  6  9 12 15 18 21 24 27
```

---
## Accessing elements in vector

```r
v1 &lt;- (1:9)*3 
print(v1)
```

```
## [1]  3  6  9 12 15 18 21 24 27
```

```r
print(v1[4])
```

```
## [1] 12
```


```r
v1 &lt;- letters[1:7]
print(paste0("This letter is ", v1)) # paste0 concatenates strings
```

```
## [1] "This letter is a" "This letter is b" "This letter is c" "This letter is d"
## [5] "This letter is e" "This letter is f" "This letter is g"
```

Question: How would you say "Letter 1 is a", "Letter 2 is b", etc. 
---
## Creating a matrix

```r
v1 &lt;- 1:9
m1 &lt;- matrix(v1, nrow = 3, byrow = T)
m2 &lt;- cbind(v1 = 1:3, v2 = 1:3, v3 = 0:0)
print(m1)
```

```
##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9
```

```r
print(m2)
```

```
##      v1 v2 v3
## [1,]  1  1  0
## [2,]  2  2  0
## [3,]  3  3  0
```
---
## Accessing elements in a matrix

```r
m2 &lt;- cbind(v1 = 1:3, v2 = 1:3, v3 = 0:0)
print(m2)
```

```
##      v1 v2 v3
## [1,]  1  1  0
## [2,]  2  2  0
## [3,]  3  3  0
```

```r
print("first row:")
```

```
## [1] "first row:"
```

```r
print(m2[1, ])
```

```
## v1 v2 v3 
##  1  1  0
```

```r
print("second column")
```

```
## [1] "second column"
```

```r
print(m2[, 2])
```

```
## [1] 1 2 3
```

```r
print("access by column name")
```

```
## [1] "access by column name"
```

```r
print(m2[, "v2"])
```

```
## [1] 1 2 3
```

Question: Create a 3 row, 4 column matrix, where the first column is (1, 2, 3), second column is (4, 5, 6 ) etc. 

---
## Lists
Lists can mix object of different types. 


```r
l &lt;- list("a", 1, 0.5, TRUE)
print(l)
```

```
## [[1]]
## [1] "a"
## 
## [[2]]
## [1] 1
## 
## [[3]]
## [1] 0.5
## 
## [[4]]
## [1] TRUE
```

```r
print(str(l)) # structure of l
```

```
## List of 4
##  $ : chr "a"
##  $ : num 1
##  $ : num 0.5
##  $ : logi TRUE
## NULL
```

---
## Lists
Lists can also be nested.

```r
l1 &lt;- list("a", 1, 0.5, TRUE)
l2 &lt;- list(l1, "test", matrix(1:9, nrow = 3)) ## first element of l2 is a list.
print(l2)
```

```
## [[1]]
## [[1]][[1]]
## [1] "a"
## 
## [[1]][[2]]
## [1] 1
## 
## [[1]][[3]]
## [1] 0.5
## 
## [[1]][[4]]
## [1] TRUE
## 
## 
## [[2]]
## [1] "test"
## 
## [[3]]
##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9
```
Question: what is the length of l1? what is the length of each element of l1? (use `length` function)
---
## Accessing elements in lists
Use double brackets `[[  ]]` to access elements in lists. 

```r
l1 &lt;- list("a", 1, 0.5, TRUE)
l2 &lt;- list(l1, "test", matrix(1:9, nrow = 3)) ## first element of l2 is a list.
print(l2[[1]])
```

```
## [[1]]
## [1] "a"
## 
## [[2]]
## [1] 1
## 
## [[3]]
## [1] 0.5
## 
## [[4]]
## [1] TRUE
```

```r
print(l2[[2]])
```

```
## [1] "test"
```

```r
print(l2[[3]])
```

```
##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9
```

Question: The first element of l2 is a list. Access this first element from l2, then the 4th element from l1. 

---
## Data frames
We will use data frames A LOT. Data frames are really tables, but they are stored in R as lists, with the following conditions.
- Each element in the list represents a column.
- Each element in the list is an atomic vector.
- The length of each vector is the same (the number of rows)


```r
m1 &lt;- cbind(1:3, letters[1:3])
print(m1) # a matrix cannot hold multiple data types. 
```

```
##      [,1] [,2]
## [1,] "1"  "a" 
## [2,] "2"  "b" 
## [3,] "3"  "c"
```

```r
print(class(m1))
```

```
## [1] "matrix" "array"
```

```r
df &lt;- data.frame(numbers = 1:3, abc = letters[1:3])
print(df) # a data frame CAN hold multiple data types. 
```

```
##   numbers abc
## 1       1   a
## 2       2   b
## 3       3   c
```

```r
print(class(df))
```

```
## [1] "data.frame"
```

---
## Useful functions
- `print`
- You can print just about anything, but as a generic function, `print` works differently for different types of objects.

```r
a &lt;- "test"
df &lt;- data.frame(numbers = 1:3, abc = letters[1:3])
print(a) # a data frame CAN hold multiple data types. 
```

```
## [1] "test"
```

```r
print(df)
```

```
##   numbers abc
## 1       1   a
## 2       2   b
## 3       3   c
```

```r
methods(print) ## all the different ways to print...
```

```
##   [1] print.acf*                                          
##   [2] print.AES*                                          
##   [3] print.anova*                                        
##   [4] print.aov*                                          
##   [5] print.aovlist*                                      
##   [6] print.ar*                                           
##   [7] print.Arima*                                        
##   [8] print.arima0*                                       
##   [9] print.AsIs                                          
##  [10] print.aspell*                                       
##  [11] print.aspell_inspect_context*                       
##  [12] print.bibentry*                                     
##  [13] print.Bibtex*                                       
##  [14] print.browseVignettes*                              
##  [15] print.bslib_fragment*                               
##  [16] print.bslib_page*                                   
##  [17] print.by                                            
##  [18] print.cachem*                                       
##  [19] print.changedFiles*                                 
##  [20] print.check_bogus_return*                           
##  [21] print.check_code_usage_in_package*                  
##  [22] print.check_compiled_code*                          
##  [23] print.check_demo_index*                             
##  [24] print.check_depdef*                                 
##  [25] print.check_details*                                
##  [26] print.check_details_changes*                        
##  [27] print.check_doi_db*                                 
##  [28] print.check_dotInternal*                            
##  [29] print.check_make_vars*                              
##  [30] print.check_nonAPI_calls*                           
##  [31] print.check_package_code_assign_to_globalenv*       
##  [32] print.check_package_code_attach*                    
##  [33] print.check_package_code_data_into_globalenv*       
##  [34] print.check_package_code_startup_functions*         
##  [35] print.check_package_code_syntax*                    
##  [36] print.check_package_code_unload_functions*          
##  [37] print.check_package_compact_datasets*               
##  [38] print.check_package_CRAN_incoming*                  
##  [39] print.check_package_datalist*                       
##  [40] print.check_package_datasets*                       
##  [41] print.check_package_depends*                        
##  [42] print.check_package_description*                    
##  [43] print.check_package_description_encoding*           
##  [44] print.check_package_license*                        
##  [45] print.check_packages_in_dir*                        
##  [46] print.check_packages_used*                          
##  [47] print.check_po_files*                               
##  [48] print.check_pragmas*                                
##  [49] print.check_Rd_line_widths*                         
##  [50] print.check_Rd_metadata*                            
##  [51] print.check_Rd_xrefs*                               
##  [52] print.check_RegSym_calls*                           
##  [53] print.check_S3_methods_needing_delayed_registration*
##  [54] print.check_so_symbols*                             
##  [55] print.check_T_and_F*                                
##  [56] print.check_url_db*                                 
##  [57] print.check_vignette_index*                         
##  [58] print.checkDocFiles*                                
##  [59] print.checkDocStyle*                                
##  [60] print.checkFF*                                      
##  [61] print.checkRd*                                      
##  [62] print.checkRdContents*                              
##  [63] print.checkReplaceFuns*                             
##  [64] print.checkS3methods*                               
##  [65] print.checkTnF*                                     
##  [66] print.checkVignettes*                               
##  [67] print.citation*                                     
##  [68] print.cli_ansi_html_style*                          
##  [69] print.cli_ansi_string*                              
##  [70] print.cli_ansi_style*                               
##  [71] print.cli_boxx*                                     
##  [72] print.cli_diff_chr*                                 
##  [73] print.cli_doc*                                      
##  [74] print.cli_progress_demo*                            
##  [75] print.cli_rule*                                     
##  [76] print.cli_sitrep*                                   
##  [77] print.cli_spark*                                    
##  [78] print.cli_spinner*                                  
##  [79] print.cli_tree*                                     
##  [80] print.codoc*                                        
##  [81] print.codocClasses*                                 
##  [82] print.codocData*                                    
##  [83] print.colorConverter*                               
##  [84] print.compactPDF*                                   
##  [85] print.condition                                     
##  [86] print.connection                                    
##  [87] print.CRAN_package_reverse_dependencies_and_views*  
##  [88] print.css*                                          
##  [89] print.data.frame                                    
##  [90] print.Date                                          
##  [91] print.default                                       
##  [92] print.dendrogram*                                   
##  [93] print.density*                                      
##  [94] print.difftime                                      
##  [95] print.dist*                                         
##  [96] print.Dlist                                         
##  [97] print.DLLInfo                                       
##  [98] print.DLLInfoList                                   
##  [99] print.DLLRegisteredRoutines                         
## [100] print.document_context*                             
## [101] print.document_position*                            
## [102] print.document_range*                               
## [103] print.document_selection*                           
## [104] print.dummy_coef*                                   
## [105] print.dummy_coef_list*                              
## [106] print.ecdf*                                         
## [107] print.eigen                                         
## [108] print.factanal*                                     
## [109] print.factor                                        
## [110] print.family*                                       
## [111] print.fileSnapshot*                                 
## [112] print.findLineNumResult*                            
## [113] print.formula*                                      
## [114] print.ftable*                                       
## [115] print.function                                      
## [116] print.getAnywhere*                                  
## [117] print.glm*                                          
## [118] print.hashtab*                                      
## [119] print.hclust*                                       
## [120] print.help_files_with_topic*                        
## [121] print.hexmode                                       
## [122] print.HoltWinters*                                  
## [123] print.hsearch*                                      
## [124] print.hsearch_db*                                   
## [125] print.htest*                                        
## [126] print.html*                                         
## [127] print.html_dependency*                              
## [128] print.htmltools.selector*                           
## [129] print.htmltools.selector.list*                      
## [130] print.infl*                                         
## [131] print.integrate*                                    
## [132] print.isoreg*                                       
## [133] print.json*                                         
## [134] print.key_missing*                                  
## [135] print.kmeans*                                       
## [136] print.knitr_kable*                                  
## [137] print.Latex*                                        
## [138] print.LaTeX*                                        
## [139] print.libraryIQR                                    
## [140] print.listof                                        
## [141] print.lm*                                           
## [142] print.loadings*                                     
## [143] print.loess*                                        
## [144] print.logLik*                                       
## [145] print.ls_str*                                       
## [146] print.medpolish*                                    
## [147] print.MethodsFunction*                              
## [148] print.mtable*                                       
## [149] print.NativeRoutineList                             
## [150] print.news_db*                                      
## [151] print.nls*                                          
## [152] print.noquote                                       
## [153] print.numeric_version                               
## [154] print.object_size*                                  
## [155] print.octmode                                       
## [156] print.packageDescription*                           
## [157] print.packageInfo                                   
## [158] print.packageIQR*                                   
## [159] print.packageStatus*                                
## [160] print.pairwise.htest*                               
## [161] print.person*                                       
## [162] print.POSIXct                                       
## [163] print.POSIXlt                                       
## [164] print.power.htest*                                  
## [165] print.ppr*                                          
## [166] print.prcomp*                                       
## [167] print.princomp*                                     
## [168] print.proc_time                                     
## [169] print.quosure*                                      
## [170] print.quosures*                                     
## [171] print.R6*                                           
## [172] print.R6ClassGenerator*                             
## [173] print.raster*                                       
## [174] print.Rd*                                           
## [175] print.recordedplot*                                 
## [176] print.restart                                       
## [177] print.RGBcolorConverter*                            
## [178] print.rlang:::list_of_conditions*                   
## [179] print.rlang_box_done*                               
## [180] print.rlang_box_splice*                             
## [181] print.rlang_data_pronoun*                           
## [182] print.rlang_dict*                                   
## [183] print.rlang_dyn_array*                              
## [184] print.rlang_envs*                                   
## [185] print.rlang_error*                                  
## [186] print.rlang_fake_data_pronoun*                      
## [187] print.rlang_lambda_function*                        
## [188] print.rlang_message*                                
## [189] print.rlang_trace*                                  
## [190] print.rlang_warning*                                
## [191] print.rlang_zap*                                    
## [192] print.rle                                           
## [193] print.rlib_bytes*                                   
## [194] print.rlib_error_3_0*                               
## [195] print.rlib_trace_3_0*                               
## [196] print.roman*                                        
## [197] print.sass*                                         
## [198] print.sass_bundle*                                  
## [199] print.sass_layer*                                   
## [200] print.SavedPlots*                                   
## [201] print.scalar*                                       
## [202] print.sessionInfo*                                  
## [203] print.shiny.tag*                                    
## [204] print.shiny.tag.env*                                
## [205] print.shiny.tag.list*                               
## [206] print.shiny.tag.query*                              
## [207] print.simple.list                                   
## [208] print.smooth.spline*                                
## [209] print.socket*                                       
## [210] print.srcfile                                       
## [211] print.srcref                                        
## [212] print.stepfun*                                      
## [213] print.stl*                                          
## [214] print.StructTS*                                     
## [215] print.subdir_tests*                                 
## [216] print.summarize_CRAN_check_status*                  
## [217] print.summary.aov*                                  
## [218] print.summary.aovlist*                              
## [219] print.summary.ecdf*                                 
## [220] print.summary.glm*                                  
## [221] print.summary.lm*                                   
## [222] print.summary.loess*                                
## [223] print.summary.manova*                               
## [224] print.summary.nls*                                  
## [225] print.summary.packageStatus*                        
## [226] print.summary.ppr*                                  
## [227] print.summary.prcomp*                               
## [228] print.summary.princomp*                             
## [229] print.summary.table                                 
## [230] print.summary.warnings                              
## [231] print.summaryDefault                                
## [232] print.table                                         
## [233] print.tables_aov*                                   
## [234] print.terms*                                        
## [235] print.ts*                                           
## [236] print.tskernel*                                     
## [237] print.TukeyHSD*                                     
## [238] print.tukeyline*                                    
## [239] print.tukeysmooth*                                  
## [240] print.undoc*                                        
## [241] print.vignette*                                     
## [242] print.warnings                                      
## [243] print.xfun_raw_string*                              
## [244] print.xfun_rename_seq*                              
## [245] print.xfun_strict_list*                             
## [246] print.xgettext*                                     
## [247] print.xngettext*                                    
## [248] print.xtabs*                                        
## see '?methods' for accessing help and source code
```
---
## Examining objects
- `ls`, `class`, `str

```r
a &lt;- "test"
df &lt;- data.frame(numbers = 1:3, abc = letters[1:3])
ls() ## list objects in global environemtn
```

```
##  [1] "a"  "df" "l"  "l1" "l2" "m1" "m2" "v1" "v2" "v3" "v4"
```

```r
class(df) ## class
```

```
## [1] "data.frame"
```


```r
str(df) ## structure
```

```
## 'data.frame':	3 obs. of  2 variables:
##  $ numbers: int  1 2 3
##  $ abc    : chr  "a" "b" "c"
```

---
## Sampling


```r
set.seed(1234) ## set a random seed
v &lt;- 1:100
s &lt;- sample(v, 50)
print(s)
```

```
##  [1] 28 80 22  9  5 38 16  4 86 90 70 79 78 14 56 62 93 84 21 40 92 67 96 66 47
## [26] 81 48  3 41 32 42 43  2 54 49 99 51  6 77 29 71 85 57  8 26 17 58 91 60 76
```

```r
print(sort(s))
```

```
##  [1]  2  3  4  5  6  8  9 14 16 17 21 22 26 28 29 32 38 40 41 42 43 47 48 49 51
## [26] 54 56 57 58 60 62 66 67 70 71 76 77 78 79 80 81 84 85 86 90 91 92 93 96 99
```

Sample with replacement

```r
s2 &lt;- sample(v, 50, replace = T)
print(sort(s2))
```

```
##  [1]  2  3  3  6  6  9 10 17 17 19 20 22 22 25 27 28 30 32 35 36 41 41 48 50 51
## [26] 55 57 58 58 60 61 63 63 65 66 70 70 71 72 76 77 80 83 85 85 86 86 87 90 96
```
---
## Sampling

## Does S2 have duplicates?

```r
s2_unique &lt;- unique(s2)
print(length(s2))
```

```
## [1] 50
```

```r
print(length(s2_unique))
```

```
## [1] 40
```

```r
print(length(s2) == length(s2_unique))
```

```
## [1] FALSE
```
---
## BIRTHDAY PROBLEM

We want to use R to answer the birthday problem. If you have n people in a room with random birthdays, do any two people share the same birthday?

Some assumptions.
- No Feb 29 birthdays
- All birthdays are equally likely.

Questions
- How can we represent all birthdays as a numeric vector?
- How can we use sampling to represent birthdays of different people?

---
## BIRTHDAY PROBLEM

- Build a function that randomly generates birthdays for n people. The function should return `TRUE` if two people share a birthday, and `FALSE` otherwise.

```r
birthday_function &lt;- function(no_people){
  ......
  if(....){
    return(TRUE) ## TRUE means that at least two people have the same birthday
  } else {
    return(FALSE) ## FALSE means that no people have the same birthday
  }
}
```
---
## BIRTHDAY PROBLEM

- Use the `birthday_function` to create a logical vector v of length 100. 

Each value of v should represent 1 run of the `birthday_function`. So v[10] is a test of the birthday_function on 10 people, v[25] represents a test of `birthday_function` on 25 people, etc.

Create a plot of number of people (x-axis) vs v (y-axis). It might look something like below.

```r
number_people &lt;- 1:10
v &lt;- c(FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, FALSE, TRUE, FALSE, FALSE)
plot(number_people, v)
```

![](class5_files/figure-html/unnamed-chunk-29-1.png)&lt;!-- --&gt;

---
## BIRTHDAY PROBLEM (CHALLENGE)

- Build a function that runs many simulations of the birthday function. The function should return the percent of time that two people have the same birthday.

For example, you want to run the function for 25 people, and 10,000 simulations. The function should return the percent of simulations in which 2 of the 25 people share a birthday.

You can use `mean` on a logical vector.


```r
mean(c(TRUE, TRUE, FALSE, TRUE))
```

```
## [1] 0.75
```

```r
birthday_sims &lt;- function(no_people, no_simulations){
  ......
  return(mean(....))
}
```

---


## Homework

- Read Unit1-Module 3, Parts 1-3 (all)
- Work on Exercises. Post questions if you have them!

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
